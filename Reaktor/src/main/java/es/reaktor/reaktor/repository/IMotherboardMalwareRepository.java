package es.reaktor.reaktor.repository;

import es.reaktor.models.Id.MotherboardMalwareId;
import es.reaktor.models.MotherboardMalware;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;

import java.util.List;

public interface IMotherboardMalwareRepository extends JpaRepository<MotherboardMalware, MotherboardMalwareId>
{
    Long countByMotherboardMalwareId_SerialNumber(String serialNumber);

    @Query("select m.serialNumber.serialNumber from MotherboardMalware m where m.name.name= ?1")
    List<String> findIdMotherboardOfMalware(String idMalware);

    @Modifying
    @Query("delete from MotherboardMalware m where m.motherboardMalwareId.serialNumber = ?1")
    void deleteByMotherboardMalwareId_SerialNumber(String serialNumber);

}
